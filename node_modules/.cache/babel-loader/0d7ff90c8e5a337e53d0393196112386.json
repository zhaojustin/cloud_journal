{"ast":null,"code":"var _jsxFileName = \"/Users/justinzhao/Documents/GitHub/cloud_journal/src/components/Database/LastUpdated.js\";\nimport React from \"react\";\nimport Airtable from \"airtable\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_KEY = process.env.REACT_APP_API_KEY;\nconst BASE_ID = \"app27OZGEFr5eKnk4\";\n\nfunction getDate() {\n  var base = new Airtable({\n    apiKey: API_KEY\n  }).base(BASE_ID);\n  var lastUpdatedDate = undefined;\n  base(\"Dailys\").select({\n    view: \"Grid view\",\n    sort: [{\n      field: \"date\",\n      direction: \"desc\"\n    }]\n  }).eachPage(function page(records, next) {\n    try {\n      console.log(records[0].fields.date);\n      lastUpdatedDate = records[0].fields.date;\n      this.setState({\n        date: lastUpdatedDate\n      });\n      next();\n    } catch {\n      return;\n    }\n  }, function (err) {\n    if (err) {\n      console.error(err);\n      return;\n    }\n  });\n}\n\nclass LastUpdated extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      date: \"Loading...\"\n    };\n  }\n\n  async componentDidMount() {\n    let auth = await function () {\n      var base = new Airtable({\n        apiKey: API_KEY\n      }).base(BASE_ID);\n      var lastUpdatedDate = undefined;\n      base(\"Dailys\").select({\n        view: \"Grid view\",\n        sort: [{\n          field: \"date\",\n          direction: \"desc\"\n        }]\n      }).eachPage(function page(records, next) {\n        try {\n          console.log(records[0].fields.date);\n          lastUpdatedDate = records[0].fields.date;\n          console.log(\"retrieved: \" + lastUpdatedDate);\n          this.setState({\n            date: lastUpdatedDate\n          });\n          console.log(\"date is set to \" + lastUpdatedDate);\n          next();\n        } catch {\n          return;\n        }\n      }, function (err) {\n        if (err) {\n          console.error(err);\n          return;\n        }\n      });\n    };\n\n    if (auth) {\n      console.log(\"the date is done\");\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: this.state.date\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"hi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default LastUpdated;","map":{"version":3,"sources":["/Users/justinzhao/Documents/GitHub/cloud_journal/src/components/Database/LastUpdated.js"],"names":["React","Airtable","API_KEY","process","env","REACT_APP_API_KEY","BASE_ID","getDate","base","apiKey","lastUpdatedDate","undefined","select","view","sort","field","direction","eachPage","page","records","next","console","log","fields","date","setState","err","error","LastUpdated","Component","constructor","state","componentDidMount","auth","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,UAArB;;AAEA,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAA5B;AACA,MAAMC,OAAO,GAAG,mBAAhB;;AAEA,SAASC,OAAT,GAAmB;AACjB,MAAIC,IAAI,GAAG,IAAIP,QAAJ,CAAa;AAAEQ,IAAAA,MAAM,EAAEP;AAAV,GAAb,EAAkCM,IAAlC,CAAuCF,OAAvC,CAAX;AACA,MAAII,eAAe,GAAGC,SAAtB;AAEAH,EAAAA,IAAI,CAAC,QAAD,CAAJ,CACGI,MADH,CACU;AACNC,IAAAA,IAAI,EAAE,WADA;AAENC,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,SAAS,EAAE;AAA5B,KAAD;AAFA,GADV,EAKGC,QALH,CAMI,SAASC,IAAT,CAAcC,OAAd,EAAuBC,IAAvB,EAA6B;AAC3B,QAAI;AACFC,MAAAA,OAAO,CAACC,GAAR,CAAYH,OAAO,CAAC,CAAD,CAAP,CAAWI,MAAX,CAAkBC,IAA9B;AACAd,MAAAA,eAAe,GAAGS,OAAO,CAAC,CAAD,CAAP,CAAWI,MAAX,CAAkBC,IAApC;AACA,WAAKC,QAAL,CAAc;AACZD,QAAAA,IAAI,EAAEd;AADM,OAAd;AAGAU,MAAAA,IAAI;AACL,KAPD,CAOE,MAAM;AACN;AACD;AACF,GAjBL,EAkBI,UAAUM,GAAV,EAAe;AACb,QAAIA,GAAJ,EAAS;AACPL,MAAAA,OAAO,CAACM,KAAR,CAAcD,GAAd;AACA;AACD;AACF,GAvBL;AAyBD;;AAED,MAAME,WAAN,SAA0B5B,KAAK,CAAC6B,SAAhC,CAA0C;AACxCC,EAAAA,WAAW,GAAG;AACZ;AAEA,SAAKC,KAAL,GAAa;AACXP,MAAAA,IAAI,EAAE;AADK,KAAb;AAGD;;AAEsB,QAAjBQ,iBAAiB,GAAG;AACxB,QAAIC,IAAI,GAAG,MAAM,YAAY;AAC3B,UAAIzB,IAAI,GAAG,IAAIP,QAAJ,CAAa;AAAEQ,QAAAA,MAAM,EAAEP;AAAV,OAAb,EAAkCM,IAAlC,CAAuCF,OAAvC,CAAX;AACA,UAAII,eAAe,GAAGC,SAAtB;AAEAH,MAAAA,IAAI,CAAC,QAAD,CAAJ,CACGI,MADH,CACU;AACNC,QAAAA,IAAI,EAAE,WADA;AAENC,QAAAA,IAAI,EAAE,CAAC;AAAEC,UAAAA,KAAK,EAAE,MAAT;AAAiBC,UAAAA,SAAS,EAAE;AAA5B,SAAD;AAFA,OADV,EAKGC,QALH,CAMI,SAASC,IAAT,CAAcC,OAAd,EAAuBC,IAAvB,EAA6B;AAC3B,YAAI;AACFC,UAAAA,OAAO,CAACC,GAAR,CAAYH,OAAO,CAAC,CAAD,CAAP,CAAWI,MAAX,CAAkBC,IAA9B;AACAd,UAAAA,eAAe,GAAGS,OAAO,CAAC,CAAD,CAAP,CAAWI,MAAX,CAAkBC,IAApC;AACAH,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBZ,eAA5B;AACA,eAAKe,QAAL,CAAc;AACZD,YAAAA,IAAI,EAAEd;AADM,WAAd;AAGAW,UAAAA,OAAO,CAACC,GAAR,CAAY,oBAAoBZ,eAAhC;AACAU,UAAAA,IAAI;AACL,SATD,CASE,MAAM;AACN;AACD;AACF,OAnBL,EAoBI,UAAUM,GAAV,EAAe;AACb,YAAIA,GAAJ,EAAS;AACPL,UAAAA,OAAO,CAACM,KAAR,CAAcD,GAAd;AACA;AACD;AACF,OAzBL;AA2BD,KA/BD;;AAgCA,QAAIO,IAAJ,EAAU;AACRZ,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACD;AACF;;AAEDY,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA,8BACE;AAAA,kBAAI,KAAKH,KAAL,CAAWP;AAAf;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMD;;AAtDuC;;AAyD1C,eAAeI,WAAf","sourcesContent":["import React from \"react\";\nimport Airtable from \"airtable\";\n\nconst API_KEY = process.env.REACT_APP_API_KEY;\nconst BASE_ID = \"app27OZGEFr5eKnk4\";\n\nfunction getDate() {\n  var base = new Airtable({ apiKey: API_KEY }).base(BASE_ID);\n  var lastUpdatedDate = undefined;\n\n  base(\"Dailys\")\n    .select({\n      view: \"Grid view\",\n      sort: [{ field: \"date\", direction: \"desc\" }],\n    })\n    .eachPage(\n      function page(records, next) {\n        try {\n          console.log(records[0].fields.date);\n          lastUpdatedDate = records[0].fields.date;\n          this.setState({\n            date: lastUpdatedDate,\n          });\n          next();\n        } catch {\n          return;\n        }\n      },\n      function (err) {\n        if (err) {\n          console.error(err);\n          return;\n        }\n      }\n    );\n}\n\nclass LastUpdated extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      date: \"Loading...\",\n    };\n  }\n\n  async componentDidMount() {\n    let auth = await function () {\n      var base = new Airtable({ apiKey: API_KEY }).base(BASE_ID);\n      var lastUpdatedDate = undefined;\n\n      base(\"Dailys\")\n        .select({\n          view: \"Grid view\",\n          sort: [{ field: \"date\", direction: \"desc\" }],\n        })\n        .eachPage(\n          function page(records, next) {\n            try {\n              console.log(records[0].fields.date);\n              lastUpdatedDate = records[0].fields.date;\n              console.log(\"retrieved: \" + lastUpdatedDate);\n              this.setState({\n                date: lastUpdatedDate,\n              });\n              console.log(\"date is set to \" + lastUpdatedDate);\n              next();\n            } catch {\n              return;\n            }\n          },\n          function (err) {\n            if (err) {\n              console.error(err);\n              return;\n            }\n          }\n        );\n    };\n    if (auth) {\n      console.log(\"the date is done\");\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <p>{this.state.date}</p>\n        <p>hi</p>\n      </div>\n    );\n  }\n}\n\nexport default LastUpdated;\n"]},"metadata":{},"sourceType":"module"}