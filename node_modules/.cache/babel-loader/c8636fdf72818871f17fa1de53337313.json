{"ast":null,"code":"var _jsxFileName = \"/Users/justinzhao/Documents/GitHub/cloud_journal/src/components/Database/LastUpdated.js\";\nimport React from \"react\";\nimport Airtable from \"airtable\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_KEY = process.env.REACT_APP_API_KEY;\nconst BASE_ID = \"app27OZGEFr5eKnk4\";\n\nclass LastUpdated extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      date: \"Loading...\"\n    };\n  }\n\n  async componentDidMount() {\n    var base = new Airtable({\n      apiKey: API_KEY\n    }).base(BASE_ID);\n    await base(\"Dailys\").select({}).firstPage(function (err, records) {\n      if (err) {\n        console.error(err);\n        return;\n      }\n\n      console.log(records[0].fields.date);\n      var lastUpdatedDate = records[0].fields.date;\n      console.log(lastUpdatedDate);\n      this.setState({\n        date: lastUpdatedDate\n      });\n    });\n    base(\"Dailys\").select({\n      view: \"Grid view\",\n      pageSize: 10,\n      sort: [{\n        field: \"date\",\n        direction: \"desc\"\n      }]\n    }).eachPage(function page(records, next) {\n      records.forEach(function (rec) {\n        try {\n          ToReturn.push(rec);\n        } catch (err) {\n          console.error(err);\n        }\n      });\n\n      try {\n        // HERE\n        next();\n      } catch {\n        return;\n      }\n    }, function (err) {\n      if (err) {\n        console.error(err);\n        rej(err.statusCode);\n        return;\n      }\n\n      acpt(ToReturn);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: this.state.date\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"hi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default LastUpdated;","map":{"version":3,"sources":["/Users/justinzhao/Documents/GitHub/cloud_journal/src/components/Database/LastUpdated.js"],"names":["React","Airtable","API_KEY","process","env","REACT_APP_API_KEY","BASE_ID","LastUpdated","Component","constructor","state","date","componentDidMount","base","apiKey","select","firstPage","err","records","console","error","log","fields","lastUpdatedDate","setState","view","pageSize","sort","field","direction","eachPage","page","next","forEach","rec","ToReturn","push","rej","statusCode","acpt","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,UAArB;;AAEA,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAA5B;AACA,MAAMC,OAAO,GAAG,mBAAhB;;AAEA,MAAMC,WAAN,SAA0BP,KAAK,CAACQ,SAAhC,CAA0C;AACxCC,EAAAA,WAAW,GAAG;AACZ;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE;AADK,KAAb;AAGD;;AAEsB,QAAjBC,iBAAiB,GAAG;AACxB,QAAIC,IAAI,GAAG,IAAIZ,QAAJ,CAAa;AAAEa,MAAAA,MAAM,EAAEZ;AAAV,KAAb,EAAkCW,IAAlC,CAAuCP,OAAvC,CAAX;AACA,UAAMO,IAAI,CAAC,QAAD,CAAJ,CACHE,MADG,CACI,EADJ,EAEHC,SAFG,CAEO,UAAUC,GAAV,EAAeC,OAAf,EAAwB;AACjC,UAAID,GAAJ,EAAS;AACPE,QAAAA,OAAO,CAACC,KAAR,CAAcH,GAAd;AACA;AACD;;AACDE,MAAAA,OAAO,CAACE,GAAR,CAAYH,OAAO,CAAC,CAAD,CAAP,CAAWI,MAAX,CAAkBX,IAA9B;AACA,UAAIY,eAAe,GAAGL,OAAO,CAAC,CAAD,CAAP,CAAWI,MAAX,CAAkBX,IAAxC;AACAQ,MAAAA,OAAO,CAACE,GAAR,CAAYE,eAAZ;AACA,WAAKC,QAAL,CAAc;AACZb,QAAAA,IAAI,EAAEY;AADM,OAAd;AAGD,KAbG,CAAN;AAeAV,IAAAA,IAAI,CAAC,QAAD,CAAJ,CACGE,MADH,CACU;AACNU,MAAAA,IAAI,EAAE,WADA;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,IAAI,EAAE,CAAC;AAAEC,QAAAA,KAAK,EAAE,MAAT;AAAiBC,QAAAA,SAAS,EAAE;AAA5B,OAAD;AAHA,KADV,EAMGC,QANH,CAOI,SAASC,IAAT,CAAcb,OAAd,EAAuBc,IAAvB,EAA6B;AAC3Bd,MAAAA,OAAO,CAACe,OAAR,CAAgB,UAAUC,GAAV,EAAe;AAC7B,YAAI;AACFC,UAAAA,QAAQ,CAACC,IAAT,CAAcF,GAAd;AACD,SAFD,CAEE,OAAOjB,GAAP,EAAY;AACZE,UAAAA,OAAO,CAACC,KAAR,CAAcH,GAAd;AACD;AACF,OAND;;AAOA,UAAI;AACF;AAEAe,QAAAA,IAAI;AACL,OAJD,CAIE,MAAM;AACN;AACD;AACF,KAtBL,EAuBI,UAAUf,GAAV,EAAe;AACb,UAAIA,GAAJ,EAAS;AACPE,QAAAA,OAAO,CAACC,KAAR,CAAcH,GAAd;AAEAoB,QAAAA,GAAG,CAACpB,GAAG,CAACqB,UAAL,CAAH;AACA;AACD;;AACDC,MAAAA,IAAI,CAACJ,QAAD,CAAJ;AACD,KA/BL;AAiCD;;AAEDK,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA,8BACE;AAAA,kBAAI,KAAK9B,KAAL,CAAWC;AAAf;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMD;;AApEuC;;AAuE1C,eAAeJ,WAAf","sourcesContent":["import React from \"react\";\nimport Airtable from \"airtable\";\n\nconst API_KEY = process.env.REACT_APP_API_KEY;\nconst BASE_ID = \"app27OZGEFr5eKnk4\";\n\nclass LastUpdated extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      date: \"Loading...\",\n    };\n  }\n\n  async componentDidMount() {\n    var base = new Airtable({ apiKey: API_KEY }).base(BASE_ID);\n    await base(\"Dailys\")\n      .select({})\n      .firstPage(function (err, records) {\n        if (err) {\n          console.error(err);\n          return;\n        }\n        console.log(records[0].fields.date);\n        var lastUpdatedDate = records[0].fields.date;\n        console.log(lastUpdatedDate);\n        this.setState({\n          date: lastUpdatedDate,\n        });\n      });\n\n    base(\"Dailys\")\n      .select({\n        view: \"Grid view\",\n        pageSize: 10,\n        sort: [{ field: \"date\", direction: \"desc\" }],\n      })\n      .eachPage(\n        function page(records, next) {\n          records.forEach(function (rec) {\n            try {\n              ToReturn.push(rec);\n            } catch (err) {\n              console.error(err);\n            }\n          });\n          try {\n            // HERE\n\n            next();\n          } catch {\n            return;\n          }\n        },\n        function (err) {\n          if (err) {\n            console.error(err);\n\n            rej(err.statusCode);\n            return;\n          }\n          acpt(ToReturn);\n        }\n      );\n  }\n\n  render() {\n    return (\n      <div>\n        <p>{this.state.date}</p>\n        <p>hi</p>\n      </div>\n    );\n  }\n}\n\nexport default LastUpdated;\n"]},"metadata":{},"sourceType":"module"}