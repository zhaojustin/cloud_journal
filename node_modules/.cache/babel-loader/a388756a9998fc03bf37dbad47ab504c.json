{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nvar callback_to_promise_1 = __importDefault(require(\"./callback_to_promise\"));\n\nvar Record =\n/** @class */\nfunction () {\n  function Record(table, recordId, recordJson) {\n    this._table = table;\n    this.id = recordId || recordJson.id;\n    this.setRawJson(recordJson);\n    this.save = callback_to_promise_1.default(save, this);\n    this.patchUpdate = callback_to_promise_1.default(patchUpdate, this);\n    this.putUpdate = callback_to_promise_1.default(putUpdate, this);\n    this.destroy = callback_to_promise_1.default(destroy, this);\n    this.fetch = callback_to_promise_1.default(fetch, this);\n    this.updateFields = this.patchUpdate;\n    this.replaceFields = this.putUpdate;\n  }\n\n  Record.prototype.getId = function () {\n    return this.id;\n  };\n\n  Record.prototype.get = function (columnName) {\n    return this.fields[columnName];\n  };\n\n  Record.prototype.set = function (columnName, columnValue) {\n    this.fields[columnName] = columnValue;\n  };\n\n  Record.prototype.setRawJson = function (rawJson) {\n    this._rawJson = rawJson;\n    this.fields = this._rawJson && this._rawJson.fields || {};\n  };\n\n  return Record;\n}();\n\nfunction save(done) {\n  this.putUpdate(this.fields, done);\n}\n\nfunction patchUpdate(cellValuesByName, opts, done) {\n  var _this = this;\n\n  if (!done) {\n    done = opts;\n    opts = {};\n  }\n\n  var updateBody = __assign({\n    fields: cellValuesByName\n  }, opts);\n\n  this._table._base.runAction('patch', \"/\" + this._table._urlEncodedNameOrId() + \"/\" + this.id, {}, updateBody, function (err, response, results) {\n    if (err) {\n      done(err);\n      return;\n    }\n\n    _this.setRawJson(results);\n\n    done(null, _this);\n  });\n}\n\nfunction putUpdate(cellValuesByName, opts, done) {\n  var _this = this;\n\n  if (!done) {\n    done = opts;\n    opts = {};\n  }\n\n  var updateBody = __assign({\n    fields: cellValuesByName\n  }, opts);\n\n  this._table._base.runAction('put', \"/\" + this._table._urlEncodedNameOrId() + \"/\" + this.id, {}, updateBody, function (err, response, results) {\n    if (err) {\n      done(err);\n      return;\n    }\n\n    _this.setRawJson(results);\n\n    done(null, _this);\n  });\n}\n\nfunction destroy(done) {\n  var _this = this;\n\n  this._table._base.runAction('delete', \"/\" + this._table._urlEncodedNameOrId() + \"/\" + this.id, {}, null, function (err) {\n    if (err) {\n      done(err);\n      return;\n    }\n\n    done(null, _this);\n  });\n}\n\nfunction fetch(done) {\n  var _this = this;\n\n  this._table._base.runAction('get', \"/\" + this._table._urlEncodedNameOrId() + \"/\" + this.id, {}, null, function (err, response, results) {\n    if (err) {\n      done(err);\n      return;\n    }\n\n    _this.setRawJson(results);\n\n    done(null, _this);\n  });\n}\n\nmodule.exports = Record;","map":{"version":3,"sources":["../src/record.ts"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar callback_to_promise_1 = __importDefault(require(\"./callback_to_promise\"));\nvar Record = /** @class */ (function () {\n    function Record(table, recordId, recordJson) {\n        this._table = table;\n        this.id = recordId || recordJson.id;\n        this.setRawJson(recordJson);\n        this.save = callback_to_promise_1.default(save, this);\n        this.patchUpdate = callback_to_promise_1.default(patchUpdate, this);\n        this.putUpdate = callback_to_promise_1.default(putUpdate, this);\n        this.destroy = callback_to_promise_1.default(destroy, this);\n        this.fetch = callback_to_promise_1.default(fetch, this);\n        this.updateFields = this.patchUpdate;\n        this.replaceFields = this.putUpdate;\n    }\n    Record.prototype.getId = function () {\n        return this.id;\n    };\n    Record.prototype.get = function (columnName) {\n        return this.fields[columnName];\n    };\n    Record.prototype.set = function (columnName, columnValue) {\n        this.fields[columnName] = columnValue;\n    };\n    Record.prototype.setRawJson = function (rawJson) {\n        this._rawJson = rawJson;\n        this.fields = (this._rawJson && this._rawJson.fields) || {};\n    };\n    return Record;\n}());\nfunction save(done) {\n    this.putUpdate(this.fields, done);\n}\nfunction patchUpdate(cellValuesByName, opts, done) {\n    var _this = this;\n    if (!done) {\n        done = opts;\n        opts = {};\n    }\n    var updateBody = __assign({ fields: cellValuesByName }, opts);\n    this._table._base.runAction('patch', \"/\" + this._table._urlEncodedNameOrId() + \"/\" + this.id, {}, updateBody, function (err, response, results) {\n        if (err) {\n            done(err);\n            return;\n        }\n        _this.setRawJson(results);\n        done(null, _this);\n    });\n}\nfunction putUpdate(cellValuesByName, opts, done) {\n    var _this = this;\n    if (!done) {\n        done = opts;\n        opts = {};\n    }\n    var updateBody = __assign({ fields: cellValuesByName }, opts);\n    this._table._base.runAction('put', \"/\" + this._table._urlEncodedNameOrId() + \"/\" + this.id, {}, updateBody, function (err, response, results) {\n        if (err) {\n            done(err);\n            return;\n        }\n        _this.setRawJson(results);\n        done(null, _this);\n    });\n}\nfunction destroy(done) {\n    var _this = this;\n    this._table._base.runAction('delete', \"/\" + this._table._urlEncodedNameOrId() + \"/\" + this.id, {}, null, function (err) {\n        if (err) {\n            done(err);\n            return;\n        }\n        done(null, _this);\n    });\n}\nfunction fetch(done) {\n    var _this = this;\n    this._table._base.runAction('get', \"/\" + this._table._urlEncodedNameOrId() + \"/\" + this.id, {}, null, function (err, response, results) {\n        if (err) {\n            done(err);\n            return;\n        }\n        _this.setRawJson(results);\n        done(null, _this);\n    });\n}\nmodule.exports = Record;\n"]},"metadata":{},"sourceType":"script"}